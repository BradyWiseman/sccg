<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring Creek Garden</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        img { max-width: 25%; height: auto; }
        #data { margin-top: 20px; font-size: 18px; }
    </style>
</head>
<body>
   <h1>Spring Creek Garden Data Monitor</h1>
   <br>
   <h2>Sunken Greenhouse</h2>
   <p>Temp: <span id="sunkenghtemp">--</span> 째F</p>
   <p>Fan: <span id="sunkenghfan">--</span> </p>
   <p>Vent: <span id="sunkenghvent">--</span> % Open</p>			    
   <h2>Little Greenhouse</h2>
   <p>Temp: <span id="littleghtemp">--</span> 째F</p>
   <p>Fan: <span id="littleghfan">--</span> </p>
   <p>Vent: <span id="littleghvent">--</span> </p>
   <h2>Hoophouse</h2>
   <p>Temp: <span id="hoopghtemp">--</span> 째F</p>
   <p>Humidity: <span id="hoopghrh">--</span> %</p>
   <h2>Pumphouse</h2>
   <p>Temp: <span id="pumptemp">--</span> 째F</p>
   <p>Pump pressure: <span id="pumppressure">--</span> PSI</p>
   <p>Pump flow: <span id="pumpflow">--</span> GPM</p>
   <p>Pump 1: <span id="pump1">--</span> </p>
   <p>Pump 2: <span id="pump2">--</span> </p>	
   <!-- <p>Page updates: <span id="pageUpdates">--</span> </p>  -->
   <p><span id="ErrorMessage"> </span></p>

   <script>
	   var pageCount = 0;
	   async function updateValues() {
   	   try {
      	    const response = await fetch('data');
            const Data = await response.json();
            document.getElementById('hoopghtemp').textContent = Data.hoopghtemp;
            document.getElementById('hoopghrh').textContent = Data.hoopghrh;
            document.getElementById('sunkenghtemp').textContent = Data.sunkenghtemp;
				document.getElementById('littleghtemp').textContent = Data.littleghtemp;
				document.getElementById('pumptemp').textContent = Data.pumptemp;
				document.getElementById('pumppressure').textContent = Data.pumppressure;
				document.getElementById('pumpflow').textContent = Data.pumpflow;
				document.getElementById('pump1').textContent = Data.pump1;
				document.getElementById('pump2').textContent = Data.pump2;
				document.getElementById('sunkenghfan').textContent = Data.sunkenghfan;
				document.getElementById('sunkenghvent').textContent = Data.sunkenghvent;
				document.getElementById('littleghfan').textContent = Data.littleghfan;
				document.getElementById('littleghvent').textContent = Data.littleghvent;
		                //document.getElementById('pageUpdates').textContent = ++pageCount;

		} catch (error) {
		 document.getElementById('ErrorMessage').textContent = error;
        	 console.error("Error fetching data:", error);
                 }
             }
      updateValues(); // Initial fetch
      setInterval(updateValues, 5000); // Refresh every 5 seconds
    </script>
</body>
</html>

